<%- include('header') %>
<style type="text/css">
  body {
    width: 100% !important;
  }

  body>header,
  body>footer,
  body>hr,
  .page__header-title,
  .page__footer-content {
    width: 900px !important;
    margin-left: auto !important;
    margin-right: auto !important;
  }

  .page__longan-container {
    position: relative;
    margin: 2em auto;
    padding: 1em 0;
    box-sizing: border-box;
    direction: ltr;
    line-height: 1.8;
    font-size: 14px;
    color: #30404f;
  }

  .page__longan-container h1 {
    color: #123;
    font-weight: bold;
    text-transform: uppercase;
    margin: 30px 0 15px;
    text-align: center;
    font-size: 24px;
    overflow: visible;
    padding: 0;
    direction: ltr;
    word-wrap: break-word;
  }

  #container {
    min-height: 100%;
  }

  #container-show {
    position: relative;
  }

  .annotation ol,
  .annotation ul {
    margin: 25px 0;
  }

  .annotation ol li,
  .annotation ul li {
    font-size: 14px;
    line-height: 18px;
    margin: 5px 0;
  }

  .annotation pre {
    display: block;
    margin: 0;
    padding: 7px 10px;
    background: #fcfcfc;
    -moz-box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.1);
    -webkit-box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.1);
    box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.1);
    overflow-x: auto;
  }

  .annotation pre code {
    border: 0;
    padding: 0;
    background: transparent;
  }
  .annotation code, ul.sections>li>div.annotation p tt {
    background: #f8f8ff;
    border: 1px solid #dedede;
    font-size: 12px;
    padding: 0 0.2em;
  }
  blockquote {
    border-left: 2px solid #ccc;
    margin: 0;
    padding: 1px 0 1px 1em;
  }

  .sections blockquote p {
    font-family: Menlo, Consolas, Monaco, monospace;
    color: #999;
    margin: 10px 0 0;
    white-space: pre-wrap;
  }

  ul.sections {
    list-style: none;
    padding: 0 0 5px;
    margin: 0;
  }

  /*---------------------- Syntax Highlighting -----------------------------*/
  td.linenos {
    background-color: #f0f0f0;
    padding-right: 10px;
  }

  span.lineno {
    background-color: #f0f0f0;
    padding: 0 5px;
  }

  #container {
    position: relative;
  }

  code,
  pre,
  tt {
    line-height: 18px;
  }

  ol,
  p,
  ul {
    margin: 0 0 15px;
  }

  #jump_to {
    padding: 5px 10px;
  }

  #jump_wrapper {
    padding: 0;
  }

  #jump_page,
  #jump_to {
    font: 10px Arial;
    text-transform: uppercase;
  }

  #jump_page .source {
    padding: 5px 10px;
  }

  #jump_to a.large {
    display: inline-block;
  }

  #jump_to a.small {
    display: none;
  }

  #background {
    position: absolute;
    top: 0;
    bottom: 0;
    width: 525px;
    background: #f5f5f5;
    /* border-right: 1px solid #e5e5ee; */
    z-index: -1;
    border-radius: 10px;
  }

  #ul-show {
    background: transparent;
  }

  ul.sections>li>div.annotation ol,
  ul.sections>li>div.annotation ul {
    padding-left: 40px;
  }

  ul.sections>li {
    white-space: nowrap;
  }

  ul.sections>li>div {
    display: inline-block;
  }
  ul.sections>li>div {
    box-sizing: border-box;
  }
  ul.sections>li>div.annotation {
    max-width: 525px;
    min-width: 525px;
    padding: 10px 25px 1px 50px;
    min-height: 5px;
    overflow-x: hidden;
    white-space: normal;
    vertical-align: top;
    text-align: left;
  }

  ul.sections>li>div.annotation pre {
    margin: 15px 0;
    padding-left: 15px;
  }

  ul.sections>li>div.content {
    max-width: 700px;
    vertical-align: top;
    border: none;
    box-shadow: none;
    padding: 0 15px 14px 25px;
  }

  ul.sections>li>div.content .highlight pre code {
    background: 0 0;
    padding-top: 0;
  }

  .pilwrap {
    position: relative;
    display: inline;
  }

  .pilcrow {
    font: 14px Arial;
    text-decoration: none;
    color: #454545;
    position: absolute;
    top: 3px;
    left: -20px;
    padding: 1px 2px;
    opacity: 0;
    -webkit-transition: opacity 0.2s linear;
  }

  .for-h1 .pilcrow {
    top: 47px;
  }

  .for-h2 .pilcrow,
  .for-h3 .pilcrow,
  .for-h4 .pilcrow {
    top: 35px;
  }

  ul.sections>li>div.annotation:hover .pilcrow {
    opacity: 1;
  }

  /*

github.com style (c) Vasily Polovnyov <vast@whiteants.net>

*/
  pre code {
    display: block;
    padding: 0.5em;
    color: #000;
    background: #f8f8ff;
  }

  pre .hljs-comment,
  pre .hljs-diff .hljs-header,
  pre .hljs-javadoc,
  pre .hljs-template_comment {
    color: #408080;
    font-style: italic;
  }

  pre .hljs-assignment,
  pre .hljs-css .hljs-rule .hljs-keyword,
  pre .hljs-javascript .hljs-title,
  pre .hljs-keyword,
  pre .hljs-lisp .hljs-title,
  pre .hljs-literal,
  pre .hljs-subst,
  pre .hljs-winutils {
    color: #954121;
    /*font-weight: bold*/
  }

  pre .hljs-hexcolor,
  pre .hljs-number {
    color: #40a070;
  }

  pre .hljs-phpdoc,
  pre .hljs-string,
  pre .hljs-tag .hljs-value,
  pre .hljs-tex .hljs-formula {
    color: #219161;
  }

  pre .hljs-id,
  pre .hljs-title {
    color: #19469D;
  }

  pre .hljs-params {
    color: #00F;
  }

  pre .hljs-javascript .hljs-title,
  pre .hljs-lisp .hljs-title,
  pre .hljs-subst {
    font-weight: normal;
  }

  pre .hljs-class .hljs-title,
  pre .hljs-haskell .hljs-label,
  pre .hljs-tex .hljs-command {
    color: #458;
    font-weight: bold;
  }

  pre .hljs-django .hljs-tag .hljs-keyword,
  pre .hljs-rules .hljs-property,
  pre .hljs-tag,
  pre .hljs-tag .hljs-title {
    color: #000080;
    font-weight: normal;
  }

  pre .hljs-attribute,
  pre .hljs-instancevar,
  pre .hljs-lisp .hljs-body,
  pre .hljs-variable {
    color: #008080;
  }

  pre .hljs-regexp {
    color: #B68;
  }

  pre .hljs-class {
    color: #458;
    font-weight: bold;
  }

  pre .hljs-input_number,
  pre .hljs-lisp .hljs-keyword,
  pre .hljs-ruby .hljs-symbol .hljs-keymethods,
  pre .hljs-ruby .hljs-symbol .hljs-keyword,
  pre .hljs-ruby .hljs-symbol .hljs-string,
  pre .hljs-symbol,
  pre .hljs-tex .hljs-special {
    color: #990073;
  }

  pre .hljs-built_in,
  pre .hljs-builtin,
  pre .hljs-constructor,
  pre .hljs-lisp .hljs-title {
    color: #0086b3;
  }

  pre .hljs-cdata,
  pre .hljs-doctype,
  pre .hljs-pi,
  pre .hljs-preprocessor,
  pre .hljs-shebang {
    color: #999;
    font-weight: bold;
  }

  pre .hljs-deletion {
    background: #fdd;
  }

  pre .hljs-addition {
    background: #dfd;
  }

  pre .hljs-diff .hljs-change {
    background: #0086b3;
  }

  pre .hljs-chunk {
    color: #aaa;
  }

  pre .hljs-tex .hljs-formula {
    opacity: 0.5;
  }
</style>
<div id="container-hiddle" style="display: none;">
  <%- content %>
</div>

<div id="container-show" class="page__longan-container container-show">
  <div id="background"></div>
  <ul id="ul-show" class="sections"></ul>
</div>
<script type="text/javascript">
  console.time('test documentFragment')
  var presign = false;
  var itmp = 0;
  var oFragmeng = document.createDocumentFragment();
  var container_children = document.getElementById('container-hiddle').childNodes;

  for (var i = 0, length = container_children.length; i < length; i += 1) {
    var childClone = container_children[i].cloneNode(true);
    if (container_children[i].nodeName === 'H1' && container_children[i].nodeName !== '#text') {
      itmp = itmp + 1
      var li = document.createElement("li");
      li.setAttribute('id', 'section-' + itmp);
      var annotation = document.createElement("div");
      annotation.setAttribute('class', 'annotation');
      annotation.appendChild(childClone);
      li.appendChild(annotation);
      oFragmeng.appendChild(li);
    } else if (container_children[i].nodeName !== '#text') {
      itmp = itmp + 1
      var li = document.createElement("li");
      var annotation = document.createElement("div");
      var pilwrap = document.createElement("div");
      var pilcrow = document.createElement("a");

      li.setAttribute('id', 'section-' + itmp);
      annotation.setAttribute('class', 'annotation');
      pilwrap.setAttribute('class', 'pilwrap');
      pilcrow.setAttribute('class', 'pilcrow');

      pilcrow.href = '#section-' + itmp;
      pilcrow.text = 'Â¶'

      pilwrap.appendChild(pilcrow);
      annotation.appendChild(pilwrap);

      if (container_children[i].nodeName === 'PRE') {
        var content = document.createElement("div");
        var highlight = document.createElement("div");

        content.setAttribute('class', 'content');
        highlight.setAttribute('class', 'highlight');

        content.appendChild(highlight);
        highlight.appendChild(childClone);
        li.appendChild(annotation);
        li.appendChild(content);
        oFragmeng.appendChild(li);
        presign = true;
      } else {
        if (presign) {
          itmp = itmp - 1;
          oFragmeng.children['section-' + itmp].firstElementChild.appendChild(childClone);
          presign = false;
        } else {
          annotation.appendChild(childClone);
          li.appendChild(annotation);
          oFragmeng.appendChild(li);
        }
      }
    }
  }
  document.getElementById('ul-show').appendChild(oFragmeng);
  oFragmeng = null;
  console.timeEnd('test documentFragment')
</script>
<%- include('footer') %>